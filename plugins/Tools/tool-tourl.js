import uploadFile from"../../lib/uploadFile.js";import uploadImage from"../../lib/uploadImage.js";import fetch from"node-fetch";import moment from"moment-timezone";import{promises,readFileSync}from"fs";import{join}from"path";import os from"os";import fs from"fs";let handler=async(m,{conn:conn,text:text,args:args,command:command})=>{let prn=`${pickRandom(["./putra/1.jpg","./putra/2.jpg","./putra/3.jpg","./putra/4.jpg","./putra/5.jpg"])}`;const imek=fs.readFileSync(prn);let who=m.mentionedJid&&m.mentionedJid[0]?m.mentionedJid[0]:m.fromMe?conn.user.jid:m.sender,q=(await conn.profilePictureUrl(who).catch((_=>hwaifu.getRandom())),await conn.getName(who),m.quoted?m.quoted:m),mime=(q.msg||q).mimetype||"";if(!mime)throw"No media found";let media=await q.download(),isTele=/image\/(png|jpe?g|gif)|video\/mp4/.test(mime),link=await(isTele?uploadImage:uploadFile)(media),caption=`ğŸ“® *L I N K :*\n${link}\nğŸ“Š *S I Z E :* ${media.length} Byte\nğŸ“› *E x p i r e d :* ${isTele?"No Expiry Date":"Unknown"}\n\n*S H O R T :* ${await shortUrl(link)}`;conn.sendMessage(m.chat,{image:await(await fetch("https://telegra.ph/file/32ad41b1a2d81898932f2.jpg")).buffer(),mimetype:"image/jpeg",fileLength:106300440576e50,caption:caption,contextInfo:{mentionedJid:[m.sender],forwardingScore:256,isForwarded:!0,externalAdReply:{title:"ï½“ï½•ï½ƒï½…ï½“ï½“ ï½ƒï½ï½ï½–ï½…ï½’ï½” ï½”ï½ ï¼µï¼²ï¼¬",body:"ï¼®ï½ ï¼¥ï½˜ï½ï½‰ï½’ï½™ ï¼¤ï½ï½”ï½…",sourceUrl:link,mediaType:1,thumbnail:imek,thumbnailUrl:link,renderLargerThumbnail:!0}}},{quoted:fpayment})};handler.help=["tourl"],handler.tags=["tools"],handler.command=/^(tourl|upload)$/i;export default handler;async function shortUrl(url){let res=await fetch(`https://tinyurl.com/api-create.php?url=${url}`);return await res.text()}